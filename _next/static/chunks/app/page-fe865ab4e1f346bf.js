(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5272:(e,t,r)=>{var a={"./en.json":[9373],"./es.json":[2978,978]};function n(e){if(!r.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],n=t[0];return Promise.all(t.slice(1).map(r.e)).then(()=>r.t(n,19))}n.keys=()=>Object.keys(a),n.id=5272,e.exports=n},2515:(e,t,r)=>{Promise.resolve().then(r.bind(r,4385))},881:(e,t,r)=>{"use strict";r.d(t,{LanguageProvider:()=>d,o:()=>h});var a=r(5155),n=r(2115),o=r(9373),l=r(8893),i=r(2761);let s=(0,n.createContext)(void 0),c=()=>"undefined"==typeof navigator?"en":(navigator.languages||[navigator.language]).some(e=>{let t=e.toLowerCase();return t.startsWith("es")||"spa"===t||t.startsWith("es_")})?"es":"en";function d(e){let{children:t}=e,[d,h]=(0,n.useState)("en"),[u,m]=(0,n.useState)(o),[g,p]=(0,n.useState)(!1),x=(0,n.useCallback)(async e=>{if("en"===e){m(o);return}p(!0);try{let t=await r(5272)("./".concat(e,".json"));m(t.default)}catch(t){console.error("Failed to load messages for language ".concat(e,":"),t),m(o)}finally{p(!1)}},[]);(0,n.useEffect)(()=>{let e=(0,i.Ri)(i.WU),t=c(),r=e||t;h(r),"en"!==r&&x(r),(0,l.KJ)(r)},[x]);let f=(0,n.useCallback)(e=>{h(e),(0,i.TV)(i.WU,e,365),x(e),(0,l.KJ)(e)},[x]);return(0,a.jsx)(s.Provider,{value:{language:d,setLanguage:f,messages:u,isLoading:g},children:t})}function h(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},4385:(e,t,r)=>{"use strict";let a;r.r(t),r.d(t,{default:()=>et});var n=r(5155),o=r(2115),l=r(6793),i=r.n(l),s=r(8173),c=r.n(s),d=r(5565);let h={src:"/_next/static/media/saferlayer-logo.b65a5a54.svg",height:143,width:703,blurWidth:0,blurHeight:0};var u=r(881),m=r(8893);let g=()=>{let{language:e,setLanguage:t,messages:r}=(0,u.o)(),a=e=>{t(e),(0,m.KJ)(e)};return(0,n.jsxs)("header",{className:"header",children:[(0,n.jsx)(c(),{href:"/",onClick:()=>{(0,m.UQ)("logo")},children:(0,n.jsx)(d.default,{className:"header__logo",src:h,alt:r.header.logo_alt,width:150})}),(0,n.jsxs)("ul",{className:"header__lang-selection",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"en"===e?"selected":"",onClick:()=>a("en"),role:"button",tabIndex:0,children:"En"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"es"===e?"selected":"",onClick:()=>a("es"),role:"button",tabIndex:0,children:"Es"})})]})]})},p={src:"/_next/static/media/id-spain.326711ee.png",height:572,width:908,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAARVBMVEXH0NTk3tDx7N/f1Mbm4ta9vbrWzb/Q1tSPnb3d29HDw76qq6q6u8XY3t7Qz8aioJiflITQwbbhxrfZrpjRwKvBxdPMva1Tl1C0AAAACXRSTlP1////////8vjAqfbvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nAXBCQIAEAgEwI1Ccl//f6oZpL1uKRWY47zgnYNYD56JYZJbI1VAMitr/CUbAWrOWWsxAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},x={src:"/_next/static/media/id-usa.9f308f3c.png",height:572,width:908,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAASFBMVEXu5b3R2dvCy9HRy8rX1NPk49/p593g2s/U1sunqaHb4ebc29fdycSJg320vb7BwMGwysXHo5egnZ3ax8LAt72EcnSoZGOguLvlmPrfAAAACnRSTlP6/////v//9Pz+4sRXFwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADBJREFUeJwFwYUBACAMA7AiZbjL/5+SwFedUgTQy1tZeYcwZjWkQ7lnm0ZCso1KUz4jagGAyr3nBgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},f={src:"/_next/static/media/id-spain-watermark.fb7ee002.png",height:572,width:908,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAOVBMVEWfk5Xc3NLY18u/s73PxsLGur7T3tHR1cnF0cjIwMzd09TS1Mfe5Ne5v7Knm5+3rbLh7uPHxrrEvraAD0bFAAAACnRSTlP8////////8vT1fwDbxwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAC5JREFUeJwFwYcBACAIA7AyVcD5/7EmwNY7p3cY3susA1lLudyxxVSJHUMsgrh9H68BPGXSmyYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},A={src:"/_next/static/media/id-usa-watermark.1b5d49be.png",height:572,width:908,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAM1BMVEXW4tiuo6aMgYSBdXfb4NO+t7LZ5t7Uyc/S28/MzMDVz8rd0tLCxLfI1Mi0r6ijmpfDuLsQCHJzAAAACXRSTlP9/////////Pzin71gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALElEQVR4nAXBiQEAIAjEsKognP/+05oQrkyAV4+Uu1PKdRmd2pprGUTEHLL8FnEBAS0pEioAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},_=()=>{let[e,t]=(0,o.useState)(50),{language:r}=(0,u.o)(),a=(0,o.useRef)(null),l=(0,o.useRef)(!1),i=(0,o.useCallback)(e=>{let r=document.querySelector(".before-after-slider");if(!r)return;let a=r.getBoundingClientRect();t(Math.max(0,Math.min(a.width,e-a.left))/a.width*100)},[]),s=e=>{1===e.buttons&&i(e.clientX)};return(0,n.jsxs)("div",{className:"before-after-slider",onTouchStart:e=>{a.current={x:e.touches[0].clientX,y:e.touches[0].clientY},l.current=!1},onTouchMove:e=>{if(!a.current)return;let t=e.touches[0].clientX-a.current.x,r=e.touches[0].clientY-a.current.y;l.current?l.current&&i(e.touches[0].clientX):Math.abs(t)>5&&Math.abs(t)>2*Math.abs(r)&&(l.current=!0,i(e.touches[0].clientX))},onTouchEnd:()=>{a.current=null,l.current=!1},onMouseMove:s,onMouseDown:s,draggable:!1,children:[(0,n.jsx)(d.default,{src:"en"===r?A:f,alt:"ID card with watermark",className:"background-img",priority:!0,width:454,height:286,quality:90,draggable:!1}),(0,n.jsx)("div",{className:"foreground-wrapper",style:{clipPath:"inset(0 ".concat(100-e,"% 0 0)")},children:(0,n.jsx)(d.default,{src:"en"===r?x:p,alt:"ID card",className:"foreground-img",priority:!0,width:454,height:286,quality:90,draggable:!1})}),(0,n.jsx)("div",{className:"slider-line",style:{left:"".concat(e,"%")}}),(0,n.jsx)("div",{className:"slider-button",style:{left:"".concat(e,"%")}})]})};r(1628);let w=function(e,t,r,a,n,o){let l=!(arguments.length>6)||void 0===arguments[6]||arguments[6];o=Math.min(o,a/2,n/2),e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+a-o,r),e.arcTo(t+a,r,t+a,r+o,o),e.lineTo(t+a,r+n-o),e.arcTo(t+a,r+n,t+a-o,r+n,o),e.lineTo(t+o,r+n),e.arcTo(t,r+n,t,r+n-o,o),e.lineTo(t,r+o),e.arcTo(t,r,t+o,r,o),e.closePath(),l&&e.fill()},v=e=>{let t=Math.max(600/e.width,600/e.height);return{canvasWidth:e.width*t+40,canvasHeight:e.height*t+20+110,scaleFactor:t}},y=(e,t,r)=>{e.fillStyle="white",w(e,0,0,t,r,10,!0)},E=(e,t,r,a,n)=>{let o=e.getImageData(t,r,a,n),l=o.data;for(let e=0;e<l.length;e+=4){let t=.299*l[e]+.587*l[e+1]+.114*l[e+2];l[e]=t,l[e+1]=t,l[e+2]=t}e.putImageData(o,t,r)},C=(e,t,r)=>{w(e,20,20,t.width*r,t.height*r,10,!1),e.clip(),e.drawImage(t,0,0,t.width,t.height,20,20,t.width*r,t.height*r),E(e,20,20,t.width*r,t.height*r)},T=(e,t,r,a,n,o)=>{let l=t.split(" "),i="",s=[];for(let t=0;t<l.length;t++){let r=i+l[t]+" ";e.measureText(r).width>n&&t>0?(s.push(i),i=l[t]+" "):i=r}s.push(i);for(let t=0;t<s.length;t++)e.fillText(s[t].trim(),r,a+t*o);return s.length},b=(e,t,r,a)=>{let n=e.canvas.width-40;e.font="bold 20px Arial",e.fillStyle="black",e.textAlign="left",T(e,a,20,t-20-60,n,20),e.font='24px "Instrument Serif"',e.fillText(r("watermark.bottom_text"),20,t-20),e.font="20px Arial",e.textAlign="right",e.fillStyle="#DDDDDD",e.fillText("v".concat("1.0"),e.canvas.width-20,t-20),e.fillStyle="black"},M=(e,t)=>{let r=document.createElement("canvas");return r.width=e,r.height=t,r};function R(e,t,r,a,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:270,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,i=r;t.split("").forEach((t,r)=>{if(" "===t)i+=n;else{e.fillStyle="hsl(".concat((o+r*l)%360,", 70%, 60%)");let n=e.measureText(t).width;e.fillText(t,i,a),i+=n}})}let j=(e,t,r,a)=>{let n=e.getContext("2d");n&&(n.clearRect(0,0,t,r),N(n,t,r,a))},N=(e,t,r,a)=>{let n=-Math.atan2(r,t),o=Math.sqrt(t*t+r*r),l=(o-t)/2,i=Math.floor(.018*o),s=.8*i,c=1.8*o,d=a.trim().replace(/(?:[.,!?;:]|\s+)$/,""),h="".concat(d," ‚Åò ").toUpperCase(),u=document.createElement("canvas").getContext("2d");if(!u)return;u.font="".concat(i,'px "Courier New"');let m=function(e,t,r){let a=0;for(let r of t)" "===r?a+=5:a+=e.measureText(r).width;return a}(u,h,0),g=Math.ceil(c/m)+2,p=h.repeat(g),x=m*g,f=Math.ceil(c/s)+4,A=document.createElement("canvas");A.width=Math.ceil(x),A.height=Math.ceil(1.2*i);let _=A.getContext("2d");if(!_)return;_.font="".concat(i,'px "Courier New"'),_.textBaseline="middle",_.clearRect(0,0,A.width,A.height),R(_,p,0,A.height/2,5,270,3);let w=document.createElement("canvas");w.width=A.width,w.height=Math.ceil(f*s);let v=w.getContext("2d");if(!v)return;for(let e=0;e<f;e++){let t=e*Math.max(2,Math.floor(.15*h.length))%h.length,r=p.slice(-t)+p.slice(0,-t);_.clearRect(0,0,A.width,A.height),R(_,r,0,A.height/2,5,270,3),v.drawImage(A,0,e*s-(A.height-s)/2)}e.translate(t/2,r/2),e.rotate(n),e.translate(-o/2+l-.25*o,0);let y=-c/2,E=Math.ceil((c-y)/1),C=10*s,T=c/2.5,b=c/6,M=Math.random()*Math.PI*2;for(let t=0;t<E;t++){let r=y+1*t,a=function(e){let t=(e-y)/(c-y);return C*(.7*Math.sin(t*Math.PI*2*(c/T)+M)+.3*Math.sin(t*Math.PI*2*(c/b)+1.5*M))}(r);e.drawImage(w,t,0,1,w.height,r,a-w.height/2,1,w.height)}e.setTransform(1,0,0,1,0,0)},k=(e,t)=>{let r=t.width,a=t.height,n=t.getContext("2d");if(!n)return;let o=n.getImageData(0,0,r,a),l=e.getImageData(0,0,r,a),i=o.data;l.data;for(let e=0;e<i.length;e+=4)(i[e]>0||i[e+1]>0||i[e+2]>0)&&(i[e+3]*=.5);n.putImageData(o,0,0),e.drawImage(t,0,0)},I=e=>{let{open:t,onClose:r,children:a}=e;return((0,o.useEffect)(()=>()=>{document.body.style.overflow=""},[t]),t)?(0,n.jsx)("div",{className:"modal",children:(0,n.jsx)("div",{className:"modal__content",style:{background:"#F7F4F4"},children:a})}):null},S=e=>{let{open:t,onClose:r,image:a,watermarkText:l,setWatermarkText:i,onWatermarkComplete:s,isProcessing:c=!1,setIsProcessing:d}=e,{messages:h}=(0,u.o)(),[g,p]=(0,o.useState)(0),x=()=>{c||((0,m.sx)("BACK_CLICK",{source:"watermark_flow"}),r())},f=async()=>{a&&!c&&(d(!0),p(Date.now()),(0,m.sx)("WATERMARK_START"),setTimeout(()=>{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t){d(!1),(0,m.sx)("WATERMARK_COMPLETE",{success:!1,error:"canvas_context"});return}let r=new Image;r.src=a,r.onload=()=>{requestAnimationFrame(async()=>{try{let{canvasWidth:a,canvasHeight:n,scaleFactor:o}=v(r);e.width=a,e.height=n,y(t,a,n),t.save(),C(t,r,o),t.restore(),b(t,n,()=>h.watermark.bottom_text,l);let i=M(a,n);j(i,a,n,l),k(t,i);let c=e.toDataURL("image/png");s(c),(0,m.x7)(g)}catch(e){console.error("Error applying watermark:",e),(0,m.sx)("WATERMARK_COMPLETE",{success:!1,error:"processing_error"})}finally{d(!1)}})},r.onerror=()=>{d(!1),(0,m.sx)("WATERMARK_COMPLETE",{success:!1,error:"image_load"})}},100))},A=100-l.length,_=A<=20;return(0,n.jsx)(I,{open:t,onClose:x,children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("div",{className:"header",children:(0,n.jsxs)("a",{className:"header__back-btn ".concat(c?"disabled":""),onClick:x,children:[(0,n.jsx)("svg",{clipRule:"evenodd",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"m9.474 5.209s-4.501 4.505-6.254 6.259c-.147.146-.22.338-.22.53s.073.384.22.53c1.752 1.754 6.252 6.257 6.252 6.257.145.145.336.217.527.217.191-.001.383-.074.53-.221.293-.293.294-.766.004-1.057l-4.976-4.976h14.692c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-14.692l4.978-4.979c.289-.289.287-.761-.006-1.054-.147-.147-.339-.221-.53-.221-.191-.001-.38.071-.525.215z"})}),h.watermark_flow.back]})}),(0,n.jsxs)("div",{className:"watermark-flow",children:[(0,n.jsx)("h2",{className:"watermark-flow__h2",children:h.watermark_flow.enter_text}),(0,n.jsxs)("div",{className:"watermark-flow__input-container",children:[(0,n.jsx)("textarea",{className:"watermark-flow__textarea",placeholder:h.watermark_flow.placeholder,value:l,onChange:e=>{let t=e.target.value;t.length<=100&&i(t)},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text");t.length>100?i(t.slice(0,97)+"..."):i(t)},rows:4,disabled:c}),(0,n.jsxs)("div",{className:"watermark-flow__char-counter ".concat(_?"near-limit":""),children:[A," ",h.watermark_flow.chars_remaining]})]}),(0,n.jsx)("a",{href:"#",className:"cta cta--primary ".concat(100===A||c?"disabled":""," ").concat(c?"processing":""),onClick:()=>{l.trim()&&!c&&((0,m.sx)("WATERMARK_SUBMIT"),(0,m.Ve)(l),f())},children:c?(0,n.jsxs)("span",{className:"loading-text",children:[(0,n.jsx)("span",{className:"loading-spinner"}),h.watermark_flow.processing]}):h.watermark_flow.continue}),(0,n.jsxs)("div",{className:"watermark-flow__tip",children:[(0,n.jsx)("span",{className:"watermark-flow__tip-label",children:h.watermark_flow.tip.label})," ",h.watermark_flow.tip.text]})]})]})})},L=e=>{let{open:t,onClose:r,onWatermarkAnother:a,watermarkedImage:o}=e,{messages:l}=(0,u.o)(),i="undefined"!=typeof navigator&&navigator.canShare&&navigator.canShare({files:[new File([],"")]}),s=()=>{(0,m.sx)("BACK_CLICK",{source:"result_modal"}),r()};return(0,n.jsx)(I,{open:t,onClose:s,children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("div",{className:"header",children:(0,n.jsxs)("a",{className:"header__back-btn",onClick:s,children:[(0,n.jsx)("svg",{clipRule:"evenodd",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"m9.474 5.209s-4.501 4.505-6.254 6.259c-.147.146-.22.338-.22.53s.073.384.22.53c1.752 1.754 6.252 6.257 6.252 6.257.145.145.336.217.527.217.191-.001.383-.074.53-.221.293-.293.294-.766.004-1.057l-4.976-4.976h14.692c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-14.692l4.978-4.979c.289-.289.287-.761-.006-1.054-.147-.147-.339-.221-.53-.221-.191-.001-.38.071-.525.215z"})}),l.watermark_flow.back]})}),(0,n.jsxs)("div",{className:"watermark-flow",children:[(0,n.jsx)("h2",{className:"watermark-flow__h2",children:l.result_modal.title}),(0,n.jsx)("p",{className:"watermark-flow__subhead",children:l.result_modal.subhead}),o&&(0,n.jsx)(d.default,{className:"watermark-flow__doc",src:o,alt:l.result_modal.document_alt,width:500,height:500,style:{width:"auto",height:"auto"}}),i?(0,n.jsx)("a",{className:"cta cta--primary",onClick:()=>{o&&((0,m.sx)("SHARE_CLICK"),fetch(o).then(e=>e.blob()).then(e=>{let t=new File([e],"watermarked_document.png",{type:e.type});navigator.share({files:[t],title:l.result_modal.share_title,text:l.result_modal.share_text}).then(()=>(0,m.xf)(!0)).catch(e=>{console.error("Error sharing:",e),(0,m.xf)(!1,e.message)})}).catch(e=>{console.error("Error fetching image:",e),(0,m.xf)(!1,"fetch_error")}))},children:l.result_modal.share}):(0,n.jsx)("p",{className:"cta cta--info",children:l.result_modal.share_fallback}),(0,n.jsx)("a",{className:"cta cta--secondary",href:o||"#",download:"watermarked_document.png",onClick:()=>{(0,m.sx)("DOWNLOAD_CLICK")},children:l.result_modal.download}),(0,n.jsx)("a",{className:"cta cta--link",onClick:()=>{(0,m.sx)("HOME_CLICK",{source:"result_modal"}),a()},children:l.result_modal.watermark_another})]})]})})},O=new Promise(e=>{a=e}),P=!1;async function D(){if(P)return!0;try{return await new Promise((e,t)=>{if(window.cv&&P){e();return}if(window.Module={onRuntimeInitialized:()=>{P=!0,a(!0),e()}},window.cv)return;let r=document.createElement("script");r.src="https://docs.opencv.org/4.8.0/opencv.js",r.async=!0,r.type="text/javascript",r.onerror=()=>{t(Error("Failed to load OpenCV.js"))},document.body.appendChild(r)}),await O}catch(e){throw console.error("Error loading OpenCV:",e),e}}var U=r(7622),F=r.n(U);let B=e=>new Promise(t=>setTimeout(t,e));function G(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function W(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=e*r,n=t*r;return[{x:a,y:n},{x:e-a,y:n},{x:e-a,y:t-n},{x:a,y:t-n}]}function K(e){let t=e.map(e=>e.x),r=e.map(e=>e.y);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...r)-Math.min(...r)}}let H=async e=>{try{await D(),(0,m.sx)("DOCUMENT_DETECTION_START"),await B(2e3);let t=Math.max(e.width,e.height),r=Math.min(e.width,e.height),a=1;t>800?a=800/t:r<600&&(a=600/r);let n=document.createElement("canvas"),o=Math.round(e.width*a),l=Math.round(e.height*a);n.width=o,n.height=l;let i=n.getContext("2d");if(!i)throw Error("Could not get canvas context");let s=document.createElement("canvas");s.width=e.width,s.height=e.height;let c=s.getContext("2d");if(!c)throw Error("Could not get temp canvas context");c.putImageData(e,0,0),i.drawImage(s,0,0,o,l);let d=new(F()),h=d.findPaperContour(cv.imread(n)),u=[],g=null;if(h){(0,m.sx)("DOCUMENT_CONTOURS_FOUND");let t=d.getCornerPoints(h);t&&(u=[{x:t.topLeftCorner.x/a,y:t.topLeftCorner.y/a},{x:t.topRightCorner.x/a,y:t.topRightCorner.y/a},{x:t.bottomRightCorner.x/a,y:t.bottomRightCorner.y/a},{x:t.bottomLeftCorner.x/a,y:t.bottomLeftCorner.y/a}],g=function(e,t,r){if(4!==e.length)return{isValid:!1,failureReasons:["Invalid number of corners"],metrics:{aspectRatio:0,minAngle:0,maxAngle:0,parallelismScore:0,areaRatio:0,maxSideLengthRatio:0}};let a=e.map((t,r)=>{let a=e[(r-1+e.length)%e.length],n=e[(r+1)%e.length],o={x:a.x-t.x,y:a.y-t.y},l={x:n.x-t.x,y:n.y-t.y},i=o.x*l.x+o.y*l.y;return Math.abs(Math.atan2(o.x*l.y-o.y*l.x,i))}),n=Math.min(...a),o=Math.max(...a),l=e.map((t,r)=>G(t,e[(r+1)%e.length])),i=Math.max(...l)/Math.min(...l),{width:s,height:c}=K(e),d=s/c,h=function(e){let t=(e,t)=>({x:t.x-e.x,y:t.y-e.y}),r=e=>{let t=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/t,y:e.y/t}},a=r(t(e[0],e[1])),n=r(t(e[2],e[3])),o=r(t(e[1],e[2])),l=r(t(e[3],e[0]));return(Math.abs(a.x*n.x+a.y*n.y)+Math.abs(o.x*l.x+o.y*l.y))/2}(e),u=function(e){let t=0;for(let r=0;r<e.length;r++){let a=(r+1)%e.length;t+=e[r].x*e[a].y,t-=e[a].x*e[r].y}t=Math.abs(t)/2;let{width:r,height:a}=K(e);return t/(r*a)}(e),m=Math.PI/180*30,g=Math.PI/180*150,p=[];e.map(e=>e.x),e.map(e=>e.y);let x={minX:.05*t,maxX:.95*t,minY:.05*r,maxY:.95*r};return e.map((e,t)=>e.x<x.minX||e.x>x.maxX||e.y<x.minY||e.y>x.maxY).some(e=>e)&&p.push("Corner position too extreme compared to default bounds"),n<m&&p.push("Angle too acute: ".concat((180*n/Math.PI).toFixed(1),"\xb0")),o>g&&p.push("Angle too obtuse: ".concat((180*o/Math.PI).toFixed(1),"\xb0")),(d>3||d<.3333333333333333)&&p.push("Extreme aspect ratio: ".concat(d.toFixed(2))),h<.7&&p.push("Poor parallelism: ".concat(h.toFixed(2))),u<.5&&p.push("Irregular shape area: ".concat((100*u).toFixed(1),"%")),i>5&&p.push("Extreme side length ratio: ".concat(i.toFixed(1))),{isValid:0===p.length,failureReasons:p,metrics:{aspectRatio:d,minAngle:n,maxAngle:o,parallelismScore:h,areaRatio:u,maxSideLengthRatio:i}}}(u,e.width,e.height),(0,m.Dp)(g.isValid,g.metrics,g.failureReasons,u.length),g.isValid)}(4!==u.length||g&&!g.isValid)&&(u=W(e.width,e.height),(0,m.sx)("DOCUMENT_DETECTION_STEP",{step:"fallback_to_default_corners",reason:4!==u.length?"invalid_corner_count":"invalid_shape"}));let p=Math.max(G(u[0],u[1]),G(u[2],u[3])),x=Math.max(G(u[1],u[2]),G(u[3],u[0]));return{corners:u,width:p,height:x}}catch(t){return console.error("Error detecting document:",t),(0,m.sx)("DOCUMENT_DETECTION_ERROR",{error:t instanceof Error?t.message:"unknown_error"}),{corners:W(e.width,e.height),width:.8*e.width,height:.8*e.height}}},V=async(e,t)=>{await D();try{let r=new cv.Mat(e.height,e.width,cv.CV_8UC4);r.data.set(e.data);let a=t.corners.reduce((e,t)=>[...e,t.x,t.y],[]),n=cv.matFromArray(4,1,cv.CV_32FC2,a),o=Math.sqrt(Math.pow(t.corners[1].x-t.corners[0].x,2)+Math.pow(t.corners[1].y-t.corners[0].y,2)),l=Math.sqrt(Math.pow(t.corners[2].x-t.corners[3].x,2)+Math.pow(t.corners[2].y-t.corners[3].y,2)),i=Math.max(o,l),s=Math.sqrt(Math.pow(t.corners[3].x-t.corners[0].x,2)+Math.pow(t.corners[3].y-t.corners[0].y,2)),c=Math.sqrt(Math.pow(t.corners[2].x-t.corners[1].x,2)+Math.pow(t.corners[2].y-t.corners[1].y,2)),d=Math.max(s,c),h=[0,0,i,0,i,d,0,d],u=cv.matFromArray(4,1,cv.CV_32FC2,h),m=cv.getPerspectiveTransform(n,u),g=new cv.Mat,p=new cv.Size(i,d);cv.warpPerspective(r,g,m,p,cv.INTER_LINEAR,cv.BORDER_CONSTANT,new cv.Scalar);let x=document.createElement("canvas");x.width=i,x.height=d,cv.imshow(x,g),r.delete(),n.delete(),u.delete(),m.delete(),g.delete();let f=x.getContext("2d");if(!f)throw Error("Could not get canvas context");return f.getImageData(0,0,i,d)}catch(e){throw console.error("Error in perspective transform:",e),e}};function z(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=e*r,n=t*r;return[{x:a,y:n},{x:e-a,y:n},{x:e-a,y:t-n},{x:a,y:t-n}]}let X=e=>{let{open:t,onClose:r,image:a,onCropComplete:l,isProcessing:i=!1,corners:s,onCornersChange:c,shouldDetectDocument:d}=e,{messages:h}=(0,u.o)(),g=(0,o.useRef)(null),p=(0,o.useRef)(null),[x,f]=(0,o.useState)(!0),[A,_]=(0,o.useState)(null),[w,v]=(0,o.useState)(1),[y,E]=(0,o.useState)(null),C=(0,o.useRef)(),T=(0,o.useRef)(!1),b=(0,o.useRef)(null),M=(0,o.useRef)(null),R=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!a)return;let e=new Image;e.onload=()=>{let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r&&(r.drawImage(e,0,0),E(r.getImageData(0,0,e.width,e.height)))},e.src=a},[a]);let j=(e,t)=>{e.clearRect(0,0,e.canvas.width,e.canvas.height),e.putImageData(t,0,0)},N=e=>({left:"".concat(e.x,"px"),top:"".concat(e.y,"px")}),k=()=>{C.current&&clearTimeout(C.current),null===A||T.current||(C.current=setTimeout(()=>{_(null)},1e3))};(0,o.useEffect)(()=>{if(!p.current)return;let e=e=>{var t;let r=e.touches[0],a=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(!a)return;let n=r.clientX-a.left,o=r.clientY-a.top;s.some(e=>{let t=e.x-n,r=e.y-o;return 30>Math.sqrt(t*t+r*r)})&&(e.preventDefault(),document.body.style.touchAction="none",document.body.style.overscrollBehavior="none")},t=()=>{document.body.style.touchAction="",document.body.style.overscrollBehavior=""},r=p.current;return r.addEventListener("touchstart",e,{passive:!1}),r.addEventListener("touchend",t),r.addEventListener("touchcancel",t),()=>{r.removeEventListener("touchstart",e),r.removeEventListener("touchend",t),r.removeEventListener("touchcancel",t),document.body.style.touchAction="",document.body.style.overscrollBehavior=""}},[s]),(0,o.useEffect)(()=>{if(!M.current||!T.current)return;let e=M.current.getContext("2d",{willReadFrequently:!0,alpha:!0});if(!e){console.error("Failed to get preview canvas context");return}e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",R.current=e},[T.current]);let S=(e,t)=>{if(!y)return;if(!R.current&&M.current){let e=M.current.getContext("2d",{willReadFrequently:!0,alpha:!0});e&&(e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",R.current=e)}let r=R.current;if(!r){console.error("Preview context not initialized");return}try{let a=document.createElement("canvas");a.width=y.width,a.height=y.height;let n=a.getContext("2d",{willReadFrequently:!0,alpha:!0});if(!n){console.error("Failed to get temporary canvas context");return}n.putImageData(y,0,0);let o=Math.round(e),l=Math.round(t);r.fillStyle="#f7f4f4",r.fillRect(0,0,200,200);let i=Math.max(0,o-200),s=Math.max(0,l-200),c=Math.min(y.width-i,400),d=Math.min(y.height-s,400),h=Math.round(.5*(i-(o-200))),u=Math.round(.5*(s-(l-200))),m=Math.round(.5*c),g=Math.round(.5*d);c>0&&d>0&&r.drawImage(a,i,s,c,d,h,u,m,g),r.strokeStyle="#fff",r.lineWidth=2,r.beginPath(),r.moveTo(85,100),r.lineTo(115,100),r.moveTo(100,85),r.lineTo(100,115),r.stroke()}catch(e){console.error("Error updating preview:",e)}};(0,o.useEffect)(()=>{let e=async()=>{if(!g.current||!p.current||!y)return;let e=g.current.getContext("2d");if(!e)return;f(!0),g.current.width=y.width,g.current.height=y.height;let t=p.current.clientWidth,r=t/y.width;if(v(r),j(e,y),d&&0===s.length)try{let e=await H(y);if(e){let t=e.corners.map(e=>({x:e.x*r,y:e.y*r}));c(t)}else{let e=z(t,y.height*r);c(e)}}catch(e){console.error("Error in document detection:",e),c(z(t,y.height*r))}else 0===s.length&&c(z(t,y.height*r));f(!1)};t&&y&&e()},[y,t,d,s.length,c]);let L=async()=>{if(y&&g.current&&!(s.length<4))try{let e={corners:s.map(e=>({x:e.x/w,y:e.y/w})),width:y.width,height:y.height},t=await V(y,e),r=O(t);l(r)}catch(e){console.error("Error transforming image:",e)}},O=e=>{let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");return r?(r.putImageData(e,0,0),t.toDataURL("image/png")):""},P=()=>{i||((0,m.sx)("BACK_CLICK",{source:"document_preview"}),r())},D=()=>4!==s.length?"":"M ".concat(s[0].x,",").concat(s[0].y," L ").concat(s[1].x,",").concat(s[1].y," L ").concat(s[2].x,",").concat(s[2].y," L ").concat(s[3].x,",").concat(s[3].y," Z");return(0,o.useEffect)(()=>()=>{C.current&&clearTimeout(C.current)},[]),(0,n.jsx)(I,{open:t,onClose:P,children:(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)("div",{className:"header",children:(0,n.jsxs)("a",{className:"header__back-btn ".concat(i?"disabled":""),onClick:P,children:[(0,n.jsx)("svg",{clipRule:"evenodd",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"m9.474 5.209s-4.501 4.505-6.254 6.259c-.147.146-.22.338-.22.53s.073.384.22.53c1.752 1.754 6.252 6.257 6.252 6.257.145.145.336.217.527.217.191-.001.383-.074.53-.221.293-.293.294-.766.004-1.057l-4.976-4.976h14.692c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-14.692l4.978-4.979c.289-.289.287-.761-.006-1.054-.147-.147-.339-.221-.53-.221-.191-.001-.38.071-.525.215z"})}),h.watermark_flow.back]})}),(0,n.jsx)("div",{className:"watermark-flow",children:(0,n.jsxs)("div",{className:"document-preview",children:[(0,n.jsx)("h2",{className:"document-preview__h2",children:x?h.document_preview.finding_document:h.document_preview.adjust_corners}),(0,n.jsxs)("div",{className:"document-preview__container",ref:p,onPointerDown:e=>{if(!p.current)return;let t=p.current.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,n=s.findIndex(e=>{let t=e.x-r,n=e.y-a;return 30>Math.sqrt(t*t+n*n)});-1!==n&&(e.preventDefault(),_(n),p.current.setPointerCapture(e.pointerId),b.current={x:r,y:a},T.current=!1,k())},onPointerMove:e=>{if(null===A||!p.current||!b.current)return;let t=p.current.getBoundingClientRect(),r=Math.max(0,Math.min(t.width,e.clientX-t.left)),a=Math.max(0,Math.min(t.height,e.clientY-t.top));if(T.current)e.preventDefault();else{let t=r-b.current.x,n=a-b.current.y;Math.sqrt(t*t+n*n)>5&&(T.current=!0,C.current&&clearTimeout(C.current),document.body.style.touchAction="none",document.body.style.overscrollBehavior="none",e.preventDefault())}requestAnimationFrame(()=>{let e=[...s];e[A]={x:r,y:a},c(e),T.current&&S(r/w,a/w),T.current||k()})},onPointerUp:e=>{p.current&&(null!==A&&(p.current.releasePointerCapture(e.pointerId),document.body.style.touchAction="",document.body.style.overscrollBehavior="",T.current&&_(null)),T.current=!1,b.current=null)},onPointerCancel:e=>{p.current&&(null!==A&&(p.current.releasePointerCapture(e.pointerId),document.body.style.touchAction="",document.body.style.overscrollBehavior=""),_(null),T.current=!1,b.current=null,C.current&&clearTimeout(C.current))},children:[(0,n.jsx)("canvas",{ref:g,className:"document-preview__canvas"}),x&&(0,n.jsx)("div",{className:"scanning-wave"}),(0,n.jsx)("div",{className:"corner-preview ".concat(T.current?"visible":""),children:(0,n.jsx)("canvas",{ref:M,width:200,height:200,className:"corner-preview__content"})}),(0,n.jsx)("div",{className:"document-area",children:(0,n.jsxs)("svg",{width:"100%",height:"100%",style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("mask",{id:"document-mask",children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,n.jsx)("path",{d:D(),fill:"black"})]})}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.1)",mask:"url(#document-mask)"}),(0,n.jsx)("path",{d:D(),stroke:"#fff",strokeWidth:"2",fill:"none"})]})}),s.map((e,t)=>(0,n.jsx)("div",{className:"corner-point ".concat(A===t?"active":""),style:N(e)},t))]}),(0,n.jsx)("a",{className:"cta cta--primary ".concat(x?"processing":""),onClick:L,children:x?(0,n.jsxs)("span",{className:"loading-text",children:[(0,n.jsx)("span",{className:"loading-spinner"}),h.watermark_flow.processing]}):h.watermark_flow.continue})]})})]})})},Y=()=>{let{messages:e,isLoading:t}=(0,u.o)(),[r,a]=(0,o.useState)(!1),[l,i]=(0,o.useState)(!1),[s,c]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),[p,x]=(0,o.useState)(""),[f,A]=(0,o.useState)(null),[w,v]=(0,o.useState)(!1),[y,E]=(0,o.useState)(!1),[C,T]=(0,o.useState)([]),[b,M]=(0,o.useState)(!0),[R,j]=(0,o.useState)(null),[N,k]=(0,o.useState)(!1),I=["image/jpeg","image/png","image/webp"],O=e=>!!I.includes(e.type)||((0,m.IV)(e.type),k(!0),!1),P=(0,o.useCallback)((e,t)=>{let r=new Image;r.onload=()=>{(0,m.Su)({width:r.width,height:r.height,format:t.format}),c(e),h(e),T([]),j(t.source),"camera"===t.source?(M(!0),E(!0)):(M(!1),a(!0)),(0,m.Qz)(!0,{type:t.type,size:t.size,source:t.source})},r.src=e},[]),D=(0,o.useCallback)(e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(!O(r)){e.target.value="";return}(0,m.sx)("UPLOAD_BUTTON_CLICK",{source:"camera"});let a=new FileReader;a.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;a&&"string"==typeof a?P(a,{width:0,height:0,format:r.type.split("/")[1],type:r.type,size:r.size,source:"camera"}):(0,m.Qz)(!1,{error:"read_error",source:"camera"})},a.onerror=()=>{(0,m.Qz)(!1,{error:"read_error",source:"camera"})},a.readAsDataURL(r),e.target.value=""},[P]),U=(0,o.useCallback)((e,t)=>{if(!O(e))return;(0,m.sx)("UPLOAD_BUTTON_CLICK",{source:t});let r=new FileReader;r.onload=r=>{var a;let n=null===(a=r.target)||void 0===a?void 0:a.result;n&&"string"==typeof n?P(n,{width:0,height:0,format:e.type.split("/")[1],type:e.type,size:e.size,source:t}):(0,m.Qz)(!1,{error:"read_error",source:t})},r.onerror=()=>{(0,m.Qz)(!1,{error:"read_error",source:t})},r.readAsDataURL(e)},[P]),F=(0,o.useCallback)(e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(U(r,"file_upload"),e.target.value="")},[U]),B=(0,o.useCallback)(e=>{h(e),E(!1),a(!0)},[]),G=(0,o.useCallback)(e=>{A(e),a(!1),i(!0)},[]),W=(0,o.useCallback)(()=>{a(!1),"camera"===R?(M(!1),h(s),E(!0)):K(),(0,m.sx)("BACK_CLICK",{source:"watermark_flow",previous_step:"camera"===R?"document_preview":"home"})},[R,s]),K=()=>{c(null),h(null),x(""),A(null),j(null),T([])};return((0,o.useEffect)(()=>{let e=document.getElementById("dropzone"),t=t=>{t.preventDefault(),t.stopPropagation(),null==e||e.classList.add("over")},r=t=>{var r,a;t.preventDefault(),t.stopPropagation(),null==e||e.classList.remove("over");let n=null===(a=t.dataTransfer)||void 0===a?void 0:null===(r=a.files)||void 0===r?void 0:r[0];n&&O(n)&&U(n,"drag_drop")},a=t=>{t.preventDefault(),t.stopPropagation(),null==e||e.classList.remove("over")};return null==e||e.addEventListener("dragover",t),null==e||e.addEventListener("dragleave",a),null==e||e.addEventListener("drop",r),()=>{null==e||e.removeEventListener("dragover",t),null==e||e.removeEventListener("dragleave",a),null==e||e.removeEventListener("drop",r)}},[U]),(0,o.useEffect)(()=>{if(N){let e=setTimeout(()=>{k(!1)},5e3);return()=>clearTimeout(e)}},[N]),t)?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"hero-header",id:"dropzone",children:[(0,n.jsxs)("div",{className:"toast toast--top ".concat(N?"":"toast--hidden"),children:[e.toast.unsupported_format,(0,n.jsx)("svg",{className:"toast__close",clipRule:"evenodd",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",viewBox:"0 0 24 24",onClick:()=>{k(!1)},children:(0,n.jsx)("path",{d:"m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"})})]}),(0,n.jsx)("div",{className:"header__stripe",children:(0,n.jsx)("div",{className:"wrapper",children:e.header.privacy_notice})}),(0,n.jsxs)("div",{className:"wrapper",children:[(0,n.jsx)(g,{}),(0,n.jsxs)("div",{className:"hero-header__left-col",children:[(0,n.jsx)("h1",{className:"hero-header__h1",children:e.hero.title}),(0,n.jsx)("input",{accept:"image/*;capture=camera",style:{display:"none"},id:"camera-button-file",type:"file",capture:"environment",onChange:D}),(0,n.jsx)("label",{htmlFor:"camera-button-file",children:(0,n.jsx)("span",{className:"cta cta--primary cta--takephoto",children:e.hero.take_photo})}),(0,n.jsx)("input",{accept:I.join(","),style:{display:"none"},id:"contained-button-file",type:"file",onChange:F}),(0,n.jsx)("label",{htmlFor:"contained-button-file",children:(0,n.jsx)("span",{className:"cta cta--secondary",children:e.hero.select_image})}),(0,n.jsx)("div",{className:"drag-n-drop-label",children:e.hero.drag_drop})]}),(0,n.jsx)("div",{className:"hero-header__id",children:(0,n.jsx)(_,{})})]}),(0,n.jsx)(X,{open:y,onClose:()=>{E(!1),K()},image:s,onCropComplete:B,isProcessing:w,corners:C,onCornersChange:T,shouldDetectDocument:b}),(0,n.jsx)(S,{open:r,onClose:W,image:d,watermarkText:p,setWatermarkText:x,onWatermarkComplete:G,isProcessing:w,setIsProcessing:v}),(0,n.jsx)(L,{open:l,onClose:()=>{i(!1),a(!0)},onWatermarkAnother:()=>{i(!1),K()},watermarkedImage:f})]})},q={src:"/_next/static/media/icon-id.c156460a.svg",height:381,width:363,blurWidth:0,blurHeight:0},Q={src:"/_next/static/media/icon-padlock.f7f96c0e.svg",height:381,width:370,blurWidth:0,blurHeight:0},J={src:"/_next/static/media/icon-thief.3d230b4c.svg",height:381,width:320,blurWidth:0,blurHeight:0},Z=()=>{let{messages:e}=(0,u.o)();return(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)("ul",{className:"features-list",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)(d.default,{src:q,alt:"ID Icon",width:150,height:150,className:""}),(0,n.jsx)("p",{children:e.body.feature_one})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)(d.default,{src:Q,alt:"Padlock Icon",width:150,height:150,className:""}),(0,n.jsx)("p",{children:e.body.feature_two})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)(d.default,{src:J,alt:"Thief Icon",width:150,height:150,className:""}),(0,n.jsx)("p",{children:e.body.feature_three})]})]})})},$={src:"/_next/static/media/bytelantic-logo.9f9ffb71.svg",height:48,width:212,blurWidth:0,blurHeight:0},ee=()=>{let{messages:e}=(0,u.o)();return(0,n.jsx)("footer",{className:"footer",children:(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)("div",{className:"footer__content",children:[(0,n.jsx)("div",{className:"footer__text",children:e.footer.built_by}),(0,n.jsx)("a",{href:"https://bytelantic.com",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(d.default,{src:$,alt:"BYTELANTIC",width:106,height:24,className:"footer__logo"})}),(0,n.jsx)("a",{href:e.footer.privacy_policy_url,target:"_blank",rel:"noreferrer",className:"footer__privacy-link",children:e.footer.privacy_policy})]})})})},et=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("meta",{charSet:"utf-8"}),(0,n.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge,chrome=1"}),(0,n.jsx)("title",{children:"Saferlayer"}),(0,n.jsx)("meta",{name:"description",content:"Add watermarks to your documents for free and avoid scams"}),(0,n.jsx)("meta",{name:"author",content:"Saferlayer"}),(0,n.jsx)("meta",{name:"keywords",content:"watermark, id, document, identity, passport"}),(0,n.jsx)("meta",{name:"robots",content:"index,follow"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),(0,n.jsx)("meta",{name:"HandheldFriendly",content:"True"}),(0,n.jsx)("meta",{name:"MobileOptimized",content:"320"}),(0,n.jsx)("meta",{httpEquiv:"cleartype",content:"on"}),(0,n.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,n.jsx)("link",{rel:"canonical",href:"https://www.saferlayer.com/"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"icon",href:"/icon.png"}),(0,n.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,n.jsx)("meta",{property:"og:title",content:"Saferlayer"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:image",content:"/img/saferlayer.png"}),(0,n.jsx)("meta",{property:"og:url",content:"https://www.saferlayer.com/"}),(0,n.jsx)("meta",{property:"og:site_name",content:"Saferlayer"}),(0,n.jsx)("meta",{property:"og:description",content:"Add watermarks to your documents for free and avoid scams"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:title",content:"Saferlayer"}),(0,n.jsx)("meta",{name:"twitter:description",content:"Add watermarks to your documents for free and avoid scams"}),(0,n.jsx)("meta",{name:"twitter:image",content:"/img/saferlayer.png"}),(0,n.jsx)("meta",{itemProp:"name",content:"Saferlayer"}),(0,n.jsx)("meta",{itemProp:"description",content:"Add watermarks to your documents for free and avoid scams"}),(0,n.jsx)("meta",{itemProp:"image",content:"/img/saferlayer.png"})]}),(0,n.jsx)(Y,{}),(0,n.jsx)(Z,{}),(0,n.jsx)(ee,{})]})},8893:(e,t,r)=>{"use strict";r.d(t,{Dp:()=>f,IV:()=>d,KJ:()=>p,Qz:()=>u,Su:()=>h,UQ:()=>c,Ve:()=>x,sx:()=>s,x7:()=>m,xf:()=>g});var a=r(2761);let n={PAGE_VIEW:"page_view",NAVIGATION:"navigation",UPLOAD_BUTTON_CLICK:"upload_button_click",IMAGE_UPLOAD_SUCCESS:"image_upload_success",IMAGE_UPLOAD_ERROR:"image_upload_error",UNSUPPORTED_FORMAT:"unsupported_format",IMAGE_METADATA:"image_metadata",DOCUMENT_DETECTION_START:"document_detection_start",DOCUMENT_DETECTION_COMPLETE:"document_detection_complete",DOCUMENT_SHAPE_INVALID:"document_shape_invalid",DOCUMENT_DETECTION_STEP:"document_detection_step",DOCUMENT_DETECTION_ERROR:"document_detection_error",DOCUMENT_CONTOURS_FOUND:"document_contours_found",WATERMARK_START:"watermark_start",WATERMARK_SUBMIT:"watermark_submit",WATERMARK_COMPLETE:"watermark_complete",WATERMARK_TEXT_LENGTH:"watermark_text_length",DOWNLOAD_CLICK:"download_click",SHARE_CLICK:"share_click",SHARE_SUCCESS:"share_success",SHARE_ERROR:"share_error",BACK_CLICK:"back_click",HOME_CLICK:"home_click",LANGUAGE_CHANGE:"language_change"},o={SOURCE:"source",ERROR_TYPE:"error_type",LANGUAGE:"language",NAVIGATION_SOURCE:"nav_source",IMAGE_TYPE:"image_type",IMAGE_SIZE:"image_size",PROCESSING_TIME:"processing_time",TEXT_LENGTH:"text_length",WIDTH:"width",HEIGHT:"height",ASPECT_RATIO:"aspect_ratio",FORMAT:"format",ORIENTATION:"orientation",CORNER_COUNT:"corner_count",PARALLELISM_SCORE:"parallelism_score",AREA_RATIO:"area_ratio",MIN_ANGLE:"min_angle",MAX_ANGLE:"max_angle",MAX_SIDE_LENGTH_RATIO:"max_side_length_ratio",FAILURE_REASONS:"failure_reasons"},l=()=>!1,i=()=>!!l()||"true"===(0,a.Ri)(a.WP),s=(e,t)=>{let r=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return null!=r}).map(e=>{let[t,r]=e;return[t,String(r)]})):void 0;!l()&&i()&&window.gtag&&window.gtag("event",n[e],r)},c=e=>{s("NAVIGATION",{[o.NAVIGATION_SOURCE]:e})},d=e=>{s("UNSUPPORTED_FORMAT",{format:e})},h=e=>{let t=e.width/e.height,r=t>1.05?"wide":t<.95?"tall":"square";s("IMAGE_METADATA",{[o.WIDTH]:e.width,[o.HEIGHT]:e.height,[o.ASPECT_RATIO]:t.toFixed(2),[o.FORMAT]:e.format,[o.ORIENTATION]:r})},u=(e,t)=>{e?s("IMAGE_UPLOAD_SUCCESS",{[o.IMAGE_TYPE]:(null==t?void 0:t.type)||null,[o.IMAGE_SIZE]:(null==t?void 0:t.size)||null,[o.SOURCE]:(null==t?void 0:t.source)||null}):s("IMAGE_UPLOAD_ERROR",{[o.ERROR_TYPE]:(null==t?void 0:t.error)||null,[o.SOURCE]:(null==t?void 0:t.source)||null})},m=e=>{let t=Date.now()-e;s("WATERMARK_COMPLETE",{[o.PROCESSING_TIME]:t})},g=(e,t)=>{e?s("SHARE_SUCCESS"):s("SHARE_ERROR",{[o.ERROR_TYPE]:t||"unknown"})},p=e=>{s("LANGUAGE_CHANGE",{[o.LANGUAGE]:e})},x=e=>{s("WATERMARK_TEXT_LENGTH",{[o.TEXT_LENGTH]:e.length})},f=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,n={[o.CORNER_COUNT]:a,[o.PARALLELISM_SCORE]:t.parallelismScore.toFixed(3),[o.AREA_RATIO]:t.areaRatio.toFixed(3),[o.MIN_ANGLE]:(180*t.minAngle/Math.PI).toFixed(1),[o.MAX_ANGLE]:(180*t.maxAngle/Math.PI).toFixed(1),[o.MAX_SIDE_LENGTH_RATIO]:t.maxSideLengthRatio.toFixed(2)};e?s("DOCUMENT_DETECTION_COMPLETE",n):s("DOCUMENT_SHAPE_INVALID",{...n,[o.FAILURE_REASONS]:(null==r?void 0:r.join(", "))||"unknown"})}},2761:(e,t,r)=>{"use strict";r.d(t,{Ri:()=>i,TV:()=>l,WP:()=>a,WU:()=>n});let a="cookie-consent-accepted",n="language",o=new Set([a]);function l(e,t,r){if(!o.has(e)&&"true"!==i(a))return;let n=new Date;n.setTime(n.getTime()+864e5*r);let l="expires=".concat(n.toUTCString());document.cookie="".concat(e,"=").concat(t,";").concat(l,";path=/;SameSite=Lax")}function i(e){if("undefined"==typeof document)return null;let t=e+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let a=r[e];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}},9373:e=>{"use strict";e.exports=JSON.parse('{"header":{"logo_alt":"Saferlayer Logo","privacy_notice":"Saferlayer runs entirely in your browser‚Äîwe never store your documents"},"hero":{"title":"Protect your documents with smart, tamper‚Äëproof watermarks","select_image":"Select an image","take_photo":"Take a photo","drag_drop":"Or simply drag and drop a file here"},"body":{"feature_one":"Smart watermarks that are tough to remove‚Äîeven with AI","feature_two":"Free, quick, and private‚Äîyour files never leave your device","feature_three":"Keep your IDs and other personal documents safe from identity theft"},"watermark_flow":{"back":"Back","enter_text":"Who can use this document, and for what purpose?","placeholder":"Example: For a background check by John Smith at Maple Realty","continue":"Continue","processing":"Processing...","tip":{"label":"Tip:","text":"Provide the exact name of the person or company and the specific purpose (e.g., background check, verification)."},"chars_remaining":"characters remaining"},"document_preview":{"finding_document":"Finding document in image...","adjust_corners":"Adjust document corners if needed"},"watermark":{"bottom_text":"Protect your documents with saferlayer.com"},"result_modal":{"title":"Your document is ready to share securely","subhead":"This unique watermark merges your document with the recipient details you provided. It‚Äôs fully traceable‚Äîgiving them a strong incentive to keep it safe.","document_alt":"Your document","download":"Download","share":"Share Document","share_fallback":"To share this document, please download it and attach it manually.","watermark_another":"Protect another document","share_title":"Document protected by Saferlayer","share_text":"This document is protected by Saferlayer. It\'s fully traceable and tamper‚Äêproof. Keep it safe. Learn more at saferlayer.com."},"footer":{"built_by":"A product by","privacy_policy":"Privacy Policy","privacy_policy_url":"https://www.iubenda.com/privacy-policy/68479894"},"cookie_consent":{"message":"We use cookies to analyze site traffic and optimize your experience.","accept":"Accept","cookie_policy":"Cookie Policy","cookie_policy_url":"https://www.iubenda.com/privacy-policy/68479894/cookie-policy"},"toast":{"unsupported_format":"Unsupported file format. Please use JPG, PNG, or WebP."}}')}},e=>{var t=t=>e(e.s=t);e.O(0,[989,441,517,358],()=>t(2515)),_N_E=e.O()}]);